<!-- Vue individuelle d'une piste -->
{% extends "base.html"%}
{% load humanize %}

{% block css %}
<style>

a:link, a:visited{
	text-decoration: none;
	color : #4d4d4d;
}
a:hover,{
	text-decoration: none;
	color : black;
}
</style>
{% endblock %}


{% block script%}{%endblock%}



{% block content %}

<div class="m-5">

   <a href="{% url "focus_project" id=task.project.id %}"><i class="fa fa-angle-double-left"></i> {{ task.project }}</a>
   <br/><br/>

   <h3>{{ task }}</h3>
   <br />

   <table class="table">
      {% comment %} BODY OF TABLE {% endcomment %}
      <tbody>
         <tr>
            <th class="thead-dark">Projet parent</th>
            <td><a href="{% url "focus_project" id=task.project.id %}">{{ task.project }}</a></td>
         </tr>
         <tr>
            <th class="thead-dark">Tâche</th>
            <td>{{ task.name }}</td>
         </tr>
         <tr>
            <th class="thead-dark">Description</th>
            <td>{{ task.description }}</td>
         </tr>
         <tr>
            <th class="thead-dark">Responsable</th>
            <td>{{ task.user.first_name }} {% filter upper %}{{ task.user.last_name }}{% endfilter %}</td>
         </tr>
         <tr>
            <th class="thead-dark">Date de début</th>
            <td>{{ task.start_date }} ({{ task.start_date|naturaltime }})</td>
         </tr>
         <tr>
            <th class="thead-dark">Deadline</th>
            <td>{{ task.due_date }} ({{ task.due_date|naturaltime }}) </td>
         </tr>
         <tr>
            <th class="thead-dark">Priorité</th>
            <td>{{ task.priority }}</td>
         </tr>
         <tr>
            <th class="thead-dark">Statut</th>
            <td>{{ task.status }}</td>
         </tr>
      </tbody>
   </table>



		<br/>
		<h5 class="mb-3">Commentaires</h5>

	<form action="{% url "focus_task" id=task.id %}" method="post">
		{% csrf_token %}
		<div class="d-flex">
			{{ form_comment.content }}
			<button class="btn btn-secondary ml-1">Ajouter</button>
		</div>
	</form>

	{% for comment in comments %}
		<div class="row w-100 mt-3 pb-3 border-bottom">
			<div class="col-2">{{ comment.submit_time }}</div>
			<div class="col-2"><span class="badge badge-secondary">{{ comment.user.first_name }} {{ comment.user.last_name }}</span></div>
			<div class="col-8">{{ comment.content }}</div>
		</div>
		{% empty %}
			<br/>Aucun commentaire
		{% endfor %}





{% endblock %}

<!-- Vue du contributeur -->
{% extends "base.html"%}


{% block script%}
<script>
   $(document).ready(
      function() {
         {% if particular.type == "ADD" %} document.getElementById("newproject-nav_item").classList.add("active"); {% endif %}
         {% if added %} $('.toast').toast('show'); {% endif %}
      }
   )
</script>
{%endblock%}



{% block css %}
<style>
a:hover {
	text-decoration : none;
	color : black;
}
</style>
{% endblock %}






{% block content %}


<!-- ================ TOAST Tache crée ================ -->
<div class="container">
   <div class="toast" data-delay="3000" style="position: fixed; bottom: 1rem; right: 1rem; min-width:250px;" aria-live="assertive" aria-atomic="true">
      <div class="toast-header" style="background-color: #c9c9c9">
         <i class="fa fa-edit"></i>
         {% if particular.type == "MODIFY" %}
            <strong class="mr-auto ml-2">Modification du projet</strong>
         {% else %}
            <strong class="mr-auto ml-2">Nouveau projet</strong>
         {% endif %}
         <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Fermer"><span aria-hidden="true">&times;</span></button>
      </div>
      <div class="toast-body" >
         {% if particular.type == "MODIFY" %}
            {{ project.name }} a été modifié
         {% else %}
            {{ project.name }} a bien été crée.
         {% endif %}

      </div>
   </div>
</div>


<div class="m-5">

   {% if particular.type == "MODIFY" %}
      <a href="{% url "focus_project" id=project.id %}"><i class="fa fa-angle-double-left"></i> {{ project }}</a>
   {% endif %}

   <div class="mx-5 my-3">
      {% if particular.type == "MODIFY" %}
         <h2>Modification du projet <em>{{ project }}</em></h2>
      {% else %}
         <h2 class="border-bottom p-1">Créer un nouveau projet</h2>
      {% endif %}

      <br/>
   </div>

   {% for error in form.errors %}
   <p>{{ error }}</p>
   {% endfor %}


   {% if particular.type == "MODIFY" %}
      <form action="{% url "manageproject" id=project.id %}" method="post">
   {% else %}
      <form action="{% url "newproject" %}" method="post">
   {% endif %}

      {% csrf_token %}

      <div class="form-group row">
         <div class="col-md-2 col-form-label">
            {{ form.name.label_tag }}
         </div>
         <div class="col-md-10">
            {{ form.name }}
         </div>
      </div>

		<!-- TODO Faire un truc plus style ici https://openclassrooms.com/fr/courses/1916641-dynamisez-vos-sites-web-avec-javascript/1922434-le-drag-drop -->
      <!-- https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_draganddrop2 -->
      <!-- https://stackoverflow.com/questions/52797484/how-to-drag-dom-element-inside-canvas-without-going-out-of-canvas-with-p5js -->
		<div class="form-group row">
         <div class="col-md-2 col-form-label">
            {{ form.members.label_tag }}
         </div>
         <div class="col-md-10">
            {{ form.members }}
         </div>
      </div>

		<br/>


      {% if particular.type == "MODIFY" %}
         <div class="row">
            <div class="col-6">
               <input type="submit" name="save" value="Enregistrer les modifications"/>
            </div>
            <div class="col-6 text-right">
               <input type="submit" name="delete" value="Supprimer le projet" class="btn btn-danger"/>
            </div>
         </div>
      {% else %}
         <input type="submit" value="Créer le projet" />
      {% endif %}

   </form>
</div>

{% endblock %}
